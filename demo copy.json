[
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Amazing",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "room",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "Apartment",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Amazing",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "any",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Top of the world",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "any",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Top of the world",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "any",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Farms",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "room",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Farms",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "room",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Surfing",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "room",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Surfing",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "room",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Lakefront",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "entire room",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Lakefront",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "entire room",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Amazing pools",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "entire room",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
    {
        "location": "chittagong, Bangladesh",
        "price": 17,
        "featureCategory": "Amazing pools",
        "checkIn": "2023-08-01",
        "checkOut": "2023-08-02",
        "locationInfo": "it build in 1900",
        "rating": 4.5,
        "placeType": "entire room",
        "bedrooms": 5,
        "beds": 8,
        "bathrooms": 5,
        "propertyType": "home",
        "guestCapacity": 15,
        "imgSrc" : "https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/lpibo-ew-1656015868.jpg"
    },
]








const ReserveData = require('../models/reserveModels');

const getAllSearchResultData = async (req, res) => {
    //const queryResult = req.query;
    const queryResult = {
        location: 'chittagong, Bangladesh',
        checkIn: '2023-08-10', 
        checkOut: '2023-08-12',
        guestCapacity: '5'     
    };
    const checkInDate = new Date(queryResult.checkIn);
    const checkOutDate = new Date( queryResult.checkOut);

    console.log(queryResult);
    //const searchQuery = {};

    const searchQuery = {
        location: { $regex: queryResult.location, $options: 'i' }, // Searching location with "chittagong"
        $and: [
          { checkIn: { $lt: checkInDate } }, // Check-in date in the database is before to the given check-in date
          { checkOut: { $gt: checkInDate} }, // Check-out date in the database is after or equal to the  given check-in date
          { checkIn: { $lt: checkOutDate } }, // Check-in date in the database is before or equal to the  given check-out date
          { checkOut: { $gt: checkOutDate} }, // Check-out date in the database is after or equal to the given check-out date
        ],
        guestCapacity: { $lte: queryResult.guestCapacity } // Guest capacity is at least 6
      };

    
    try {
        const data = await ReserveData.find(searchQuery);
        console.log(data);
        res.status(200).send(data);
    }
    catch (error) {
        console.error(error);
        res.status(500).send(error.message);
    }
}

module.exports = { getAllSearchResultData };


in the database satisfy this this condition like
check-in date is greater then the database check-in date
check-out date is greater then the database check-in date

check-in date is less than the database check-in date
check-out date is less then the database check-out date








https://i.ibb.co/FqqqKck/view9.webp
https://i.ibb.co/n6MjMXT/view10.webp
https://i.ibb.co/gSxwXXq/view11.webp
https://i.ibb.co/K6SXNzc/view12.webp
https://i.ibb.co/NS9DsQh/view13.webp
https://i.ibb.co/m0fVYwW/view14.webp
https://i.ibb.co/RHhCQ4W/view15.webp
https://i.ibb.co/WKBx2wW/view16.webp
https://i.ibb.co/61QP7fJ/view17.webp
https://i.ibb.co/z4w40hS/view18.webp
https://i.ibb.co/ZxtWTsq/view19.webp
https://i.ibb.co/6Pj3h8r/view20.webp
https://i.ibb.co/pZGCJXp/view21.webp
https://i.ibb.co/YkXDXGY/view22.webp
https://i.ibb.co/28Xhw6T/view23.webp
https://i.ibb.co/3Mkjp69/view24.webp
https://i.ibb.co/P6SFW96/view25.webp
https://i.ibb.co/PcrQZwW/view26.webp
https://i.ibb.co/VgPwG4b/view27.webp
https://i.ibb.co/T8STpzt/view28.webp
https://i.ibb.co/qW5Hnp6/view29.webp
https://i.ibb.co/0Krj9GB/view30.webp
https://i.ibb.co/hCWkk8p/view3.jpg
https://i.ibb.co/zscZYSp/view2.jpg
https://i.ibb.co/3vGCLD3/view1.webp
https://i.ibb.co/02hMSTP/view4.webp
https://i.ibb.co/qWNB7Hj/view5.webp
https://i.ibb.co/V2PN6kd/view6.webp
https://i.ibb.co/dGY7824/view7.webp
https://i.ibb.co/ZG7wQxn/view8.webp